<?xml version="1.0" encoding="utf-8" ?>
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
 <html>
 <head>
 <!--Copyright (C)2010-2015 Sensory Inc-->
 <link rel="stylesheet" type="text/css" href="frozen.css" >
 <title>TrulyHandsfree Software Development Kit</title>
 </head>
 <body bgcolor="#ffffff" text="#000000">

<header><center>Sensory Confidential</center></header>
<h2>thfSpeakerEnroll</h2>
<h3>Syntax</h3>
<pre>
#include &lt;trulyhandsfree.h&gt;
int thfSpeakerEnroll(thf_t **thf, <a href="objects.html#recog_t">recog_t</a> *recog, char *phrase, 
                     char *ignorePhnSpec, unsigned short numUsers, 
                     thfUser_t *user, <a href="objects.html#searchs_t">searchs_t</a> **outputSearch, 
                     <a href="objects.html#recog_t">recog_t</a> **outputRecog);
</pre>
<h3>Description</h3>
 Using the recognizer object and enrollment recordings from one or more users as input,  create a search and recognizer specific to the users for the specified phrase. The search result will be the user ID, not the words in the phrase. </p> <p> There are a number of parameters that can be modified to target different  false accept and false reject points.  The default values are recommended  starting points, although different triggers behave differently, and some experimentation may yield better values for a particular trigger.  </p> <p> The parameters SPEAKER_TRIGGER_SAMP_PER_CAT, SPEAKER_SAMP_PER_CAT_WITHIN,  SPEAKER_TARGET_SNR, SPEAKER_DUR_MIN_FACTOR, and SPEAKER_DUR_MAX_FACTOR are described in  <a href='constants.html#thfSpeakerConfig_t'>thfSpeakerConfig_t</a>.  </p> <p> <a href='constants.html#PS_PARAMA_OFFSET'>PS_PARAMA_OFFSET</a> controls the  phrasespotting sensitivity.   In <em>previous</em> SDK versions, PS_PARAMA_OFFSET needed to be set both  before calling  <a href="thfSpeakerEnroll.html">thfSpeakerEnroll</a>, and before using the search that is returned by  <a href="thfSpeakerEnroll.html">thfSpeakerEnroll</a>. Now, PS_PARAMA_OFFSET needs to be set only once, before calling <a href="thfSpeakerEnroll.html">thfSpeakerEnroll</a>, using a call to <a href="thfPhrasespotConfigSet.html">thfPhrasespotConfigSet</a>. The offset is now written into the speaker-adapted search that is returned.   When the speaker-adapted search is subsequently read in, the offset is  automatically applied. </p> <p> EPQ is enabled during this call.  EPQ can be turned off with a subsequent call to  <a href="thfRecogConfigSet.html">thfRecogConfigSet</a> with the REC_EPQ_ENABLE parameter. See the  <a href="epq.html">EPQ Guidelines</a> for more information about EPQ. </p> <p> The recognizer and search that are returned by this function need to  (eventually) be passed to  <a href="thfRecogDestroy.html">thfRecogDestroy</a> and <a href="thfPronunDestroy.html">thfPronunDestroy</a> to destroy the models and free the memory. </p> <p>
<h3>Parameters</h3>
<table>
<tr>
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Dir.</th>
<th align="left">Description</th>
</tr>
<tr>
<td nowrap valign="top"><code>thf_t *</code></td>
<td nowrap valign="top"><code>*thf</code></td>
<td align="center" valign="top">in</td>
<td width="500">Session object.</td>
</tr>
<tr>
<td nowrap valign="top"><a href="objects.html#recog_t"><code>recog_t *</code></a></td>
<td nowrap valign="top"><code>recog</code></td>
<td align="center" valign="top">in</td>
<td width="500">Recognizer object.</td>
</tr>
<tr>
<td nowrap valign="top"><code>char *</code></td>
<td nowrap valign="top"><code>phrase</code></td>
<td align="center" valign="top">in</td>
<td width="500">character string of the phrase being spotted</td>
</tr>
<tr>
<td nowrap valign="top"><code>char *</code></td>
<td nowrap valign="top"><code>ignorePhnSpec</code></td>
<td align="center" valign="top">in</td>
<td width="500">A string that specifies what types of phonemes to ignore during adaptation. Supported values are 'IGNORE_SV_DEFAULT' and 'IGNORE_PAUSE'. 'IGNORE_SV_DEFAULT' will cause the function to ignore phonemes in the recording that are less important for speaker verification and speaker ID, e.g. the /f/ sound in 'foo'. 'IGNORE_PAUSE' will cause the function to ignore only the 'pause' phoneme. Performance is typically better with 'IGNORE_SV_DEFAULT', but 'IGNORE_PAUSE' is made available for experimentation.</td>
</tr>
<tr>
<td nowrap valign="top"><code>unsigned short</code></td>
<td nowrap valign="top"><code>numUsers</code></td>
<td align="center" valign="top">in</td>
<td width="500">number of users to enroll.</td>
</tr>
<tr>
<td nowrap valign="top"><code>thfUser_t *</code></td>
<td nowrap valign="top"><code>user</code></td>
<td align="center" valign="top">in</td>
<td width="500">array of user data structures, containing all enrollment recordings for all users. See the data structure documentation.</td>
</tr>
<tr>
<td nowrap valign="top"><a href="objects.html#searchs_t"><code>searchs_t **</code></a></td>
<td nowrap valign="top"><code>outputSearch</code></td>
<td align="center" valign="top">out</td>
<td width="500">UDT search object created and returned by thfSpeakerEnroll().</td>
</tr>
<tr>
<td nowrap valign="top"><a href="objects.html#recog_t"><code>recog_t **</code></a></td>
<td nowrap valign="top"><code>outputRecog</code></td>
<td align="center" valign="top">out</td>
<td width="500">UDT recognizer object created and returned by thfSpeakerEnroll().</td>
</tr>
</table>
<h3>Return</h3>
 Returns 1 on success or 0 on error.
<h3>Errors</h3>
<table>
<tr>
<th align="left">String</th>
<th align="left">Description</th>
</tr>
<tr>
<td valign="top"><code>recog object not found</code></td>
<td valign="top">Invalid recognizer object handle.</td>
</tr>
<tr>
<td valign="top"><code>speaker object not found in recognizer</code></td>
<td valign="top"><a href="thfSpeakerInit.html">thfSpeakerInit</a> must be called with this recognizer before enrolling.</td>
</tr>
<tr>
<td valign="top"><code>numUsers must be greater than 0</code></td>
<td valign="top">There must be at least one user to enroll.</td>
</tr>
<tr>
<td valign="top"><code>user object not found</code></td>
<td valign="top">Invalid user object handle</td>
</tr>
<tr>
<td valign="top"><code>usernames must have length >= 1</code></td>
<td valign="top">Names specified in the user object must be strings of length greater than or equal to one character.</td>
</tr>
<tr>
<td valign="top"><code>no users have all valid audio</code></td>
<td valign="top">None of the users in the user object have valid recordings.</td>
</tr>
<tr>
<td valign="top"><code>internal error removing subject from spkr</code></td>
<td valign="top">Internal error: contact customer support</td>
</tr>
<tr>
<td valign="top"><code>internal error adding to speaker</code></td>
<td valign="top">Internal error: contact customer support</td>
</tr>
<tr>
<td valign="top"><code>internal error in Speaker_addSubject</code></td>
<td valign="top">Internal error: contact customer support</td>
</tr>
<tr>
<td valign="top"><code>internal error in Speaker_storeFeatsFromWaveform</code></td>
<td valign="top">Internal error: contact customer support</td>
</tr>
<tr>
<td valign="top"><code>internal error in thfSpeakerAddAntiData</code></td>
<td valign="top">Internal error: contact customer support</td>
</tr>
<tr>
<td valign="top"><code>internal error in thfSpeakerAdapt</code></td>
<td valign="top">Internal error: contact customer support</td>
</tr>
<tr>
<td valign="top"><code>internal error in thfSpeakerCombine</code></td>
<td valign="top">Internal error: contact customer support</td>
</tr>
</table>
<h3>See Also</h3>
<a href="thfSpeakerInit.html">thfSpeakerInit</a>, <a href="thfUdtEnroll.html">thfUdtEnroll</a>, <a href="thfSpeakerCheckEnrollments.html">thfSpeakerCheckEnrollments</a>, <a href="thfSpeakerSaveRecogToFile.html">thfSpeakerSaveRecogToFile</a>, <a href="thfRecogCreateFromFile.html">thfRecogCreateFromFile</a>, <a href="thfRecogCreateFromFunc.html">thfRecogCreateFromFunc</a>, <a href="thfRecogCreateFromStatic.html">thfRecogCreateFromStatic</a>, <a href="thfSearchCreateFromFile.html">thfSearchCreateFromFile</a>, <a href="thfSearchCreateFromFunc.html">thfSearchCreateFromFunc</a>, <a href="thfSearchCreateFromGrammar.html">thfSearchCreateFromGrammar</a>, <a href="thfSearchCreateFromList.html">thfSearchCreateFromList</a>, <a href="thfSearchCreateFromStatic.html">thfSearchCreateFromStatic</a>, <a href="thfRecogCreateFromFile.html">thfRecogCreateFromFile</a>, <a href="thfRecogCreateFromFunc.html">thfRecogCreateFromFunc</a> and <a href="thfRecogCreateFromStatic.html">thfRecogCreateFromStatic</a>
<h3>Link To</h3>
<a href="platforms.html#sdklib">thf</a>



<!-- --------------------------------------------------------------------- -->
</body>
