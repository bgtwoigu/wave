<?xml version="1.0" encoding="utf-8" ?>
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
 <html>
 <head>
 <!--Copyright (C)2010-2015 Sensory Inc-->
 <link rel="stylesheet" type="text/css" href="frozen.css" >
 <title>TrulyHandsfree Software Development Kit</title>
 </head>
 <body bgcolor="#ffffff" text="#000000">

<header><center>Sensory Confidential</center></header>
<h2>thfSpeakerCheckEnrollments</h2>
<h3>Syntax</h3>
<pre>
#include &lt;trulyhandsfree.h&gt;
int thfSpeakerCheckEnrollments(thf_t **thf, <a href="objects.html#recog_t">recog_t</a> *recog, thfUser_t *user, 
                               unsigned short whichUser, 
                               unsigned long *globalFeedback, 
                               unsigned long *feedbackArray, 
                               float *phraseQuality);
</pre>
<h3>Description</h3>
 Using the recognizer object and user data structure, provide feedback on the quality of the phrase and on the quality of the enrollment recordings for a specific user.   <p> The phrase quality is a general measure of how well the trigger phrase is likely to perform, in terms of false rejects and false accepts.  The quality of the enrollment recordings is provided in two variables: (1) a 'global' feedback that indicates, in a single variable, if there are  problems detected in any of the enrollment recordings (and if so, what kinds of problems are detected), and (2) an enrollment-specific feedback  array that indicates, for each enrollment recording, if any problem is detected and what the detected problems are.  A value of NULL can be passed in for phrase quality, global feedback, and/or enrollment-specific feedback, if no output of that type is desired.  The global feedback and enrollment-specific feedback provide the same kind of feedback, but at different levels of detail. <p>Quality measure thresholds have reasonable default values, but can be modified using <a href='thfRecogConfigSet.html'>thfRecogConfigSet</a>.</p>
<h3>Parameters</h3>
<table>
<tr>
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Dir.</th>
<th align="left">Description</th>
</tr>
<tr>
<td nowrap valign="top"><code>thf_t *</code></td>
<td nowrap valign="top"><code>*thf</code></td>
<td align="center" valign="top">in</td>
<td width="500">Session object.</td>
</tr>
<tr>
<td nowrap valign="top"><a href="objects.html#recog_t"><code>recog_t *</code></a></td>
<td nowrap valign="top"><code>recog</code></td>
<td align="center" valign="top">in</td>
<td width="500">recognizer object.</td>
</tr>
<tr>
<td nowrap valign="top"><code>thfUser_t *</code></td>
<td nowrap valign="top"><code>user</code></td>
<td align="center" valign="top">in</td>
<td width="500">array of user data structures, containing all enrollment recordings for all users.</td>
</tr>
<tr>
<td nowrap valign="top"><code>unsigned short</code></td>
<td nowrap valign="top"><code>whichUser</code></td>
<td align="center" valign="top">in</td>
<td width="500">index into the array of user data structures, indicating which user to provide feedback for. This value must be at least zero, and less than the length of the array 'user'.</td>
</tr>
<tr>
<td nowrap valign="top"><code>unsigned long *</code></td>
<td nowrap valign="top"><code>globalFeedback</code></td>
<td align="center" valign="top">out</td>
<td width="500">NULL, or a single value indicating problems with any of the enrollment recordings. If NULL, no global feedback is provided. If not NULL, then if this value is 0, no problems were detected in any of the enrollment recordings. If this value is not 0, then the specific problem(s) can be determined from the bit fields, as specified in the list of <a href="params.html#recordingQuality">recording quality parameters</a>.</td>
</tr>
<tr>
<td nowrap valign="top"><code>unsigned long *</code></td>
<td nowrap valign="top"><code>feedbackArray</code></td>
<td align="center" valign="top">out</td>
<td width="500">NULL, or array indicating problems <em>per enrollment recording</em>. If not NULL, feedbackArray must be allocated before calling thfUdtCheckEnrollments(). For a particular enrollment index 'eIdx' (from 0 through the number of enrollments minus 1), the value of feedbackArray[eIdx] is 0 if no problems were detected for this enrollment. A non-zero value indicates one or more detected problems. The specific problem(s) can be identified from the bit fields, as specified in the list of <a href="params.html#recordingQuality">recording quality parameters</a>. If feedback on the individual enrollment recordings is desired, a one-dimensional array of 'unsigned long' must be allocated and passed in as the 'feedbackArray' parameter.</td>
</tr>
<tr>
<td nowrap valign="top"><code>float *</code></td>
<td nowrap valign="top"><code>phraseQuality</code></td>
<td align="center" valign="top">out</td>
<td width="500">NULL, or a value from 0.0 to 1.0 indicating the estimated quality of the enrollment phrase. A value of 0 indicates extremely poor quality, and a value of 1.0 indicates very good quality. Very low values indicate that the user should re-enroll until a better value is obtained; we recommend a cutoff of <em>at least</em> 0.35, below which the user must re-enroll. This value is more useful in user-defined triggers, but can still be obtained for pre-defined triggers. More detail is provided in the enrollment-checking section of <a href="UdtEnrollSteps.html#checkEnrollments">how to enroll a user-defined trigger</a>.</td>
</tr>
</table>
<h3>Return</h3>
 Returns 1 on success or 0 on error.
<h3>Errors</h3>
<table>
<tr>
<th align="left">String</th>
<th align="left">Description</th>
</tr>
<tr>
<td valign="top"><code>recog object not found</code></td>
<td valign="top">Invalid recognizer object handle.</td>
</tr>
<tr>
<td valign="top"><code>search object not found</code></td>
<td valign="top">Invalid search in recognizer object handle.</td>
</tr>
<tr>
<td valign="top"><code>user object not found</code></td>
<td valign="top">Invalid user object handle.</td>
</tr>
<tr>
<td valign="top"><code>Error: internal error in Speaker_getFeatsFromWaveform()</code></td>
<td valign="top">Internal error: contact customer support</td>
</tr>
</table>
<h3>See Also</h3>
<a href="thfSpeakerCreateFromFile.html">thfSpeakerCreateFromFile</a>, <a href="thfSpeakerEnroll.html">thfSpeakerEnroll</a>, <a href="thfUdtCheckEnrollments.html">thfUdtCheckEnrollments</a>, <a href="thfRecogCreateFromFile.html">thfRecogCreateFromFile</a>, <a href="thfRecogCreateFromFunc.html">thfRecogCreateFromFunc</a> and <a href="thfRecogCreateFromStatic.html">thfRecogCreateFromStatic</a>
<h3>Link To</h3>
<a href="platforms.html#sdklib">thf</a>



<!-- --------------------------------------------------------------------- -->
</body>
