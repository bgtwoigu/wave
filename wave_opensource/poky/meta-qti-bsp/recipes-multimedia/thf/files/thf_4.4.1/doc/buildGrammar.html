<?xml version="1.0" encoding="utf-8" ?>
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
 <html>
 <head>
 <!--Copyright (C)2010-2015 Sensory Inc-->
 <link rel="stylesheet" type="text/css" href="frozen.css" >
 <title>TrulyHandsfree Software Development Kit</title>
 </head>
 <body bgcolor="#ffffff" text="#000000">

</OBJECT><HEADER><CENTER>Sensory Confidential</CENTER></HEADER>
<h2>Defining a Vocabulary Using a Grammar (Advanced)</h2>


A grammar specification is a set of rules that define a set of phrases that make up the vocabulary. A grammar can represent more complex vocabularies than a simple phrase list specification. However, it requires you to become familiar with the syntax of a grammar specification and to specify pronunciations explicitly. The following steps are involved in creating a search object from a grammar specification:

<ol>
<li>Define a grammar specification (see <a href="grammar.html">Syntax of grammar specification</a>).

<li>Define a list of unique words appearing in the grammar. <em>NOTE</em>: This definition of a word list is different to the one used for a phrase list specification.
<li>Define pronunciations for each word in the grammar (see <a href="pronuns.html">How to generate pronunciations</a>). <em>NOTE</em>: The order of the pronunciation list must correspond with the order of the word list.
<li>Using the grammar, word list and pronunciation list, compile the vocabulary specification to create a search object by calling <a href="thfSearchCreateFromGrammar.html">thfSearchCreateFromGrammar</a>. This search object contains a binary representation of the vocabulary.
<li>Utilize the search object for recognition by calling <a
href="thfRecogInit.html">thfRecogInit</a> and/or save it to file for later use by calling <a href="thfSearchSaveToFile.html">thfSearchSaveToFile</a>.
<li>Destroy the search object when no longer needed by calling <a href="thfSearchDestroy.html">thfSearchDestroy</a>.
</ol>
</p>

<h3>Example Grammar Specification</h3>
<pre>
  const char *grammar = \
     " hour = one | two | three | four | five | six | seven | eight | \
			   nine | ten | eleven | twelve; \
       ampm  = am | pm; \
       halfday = noon | midnight; \
       subhour = thirty | oclock; \
       gra     = (*sil%% | *any%%) (*nota | [twelve] $halfday | \
                 $hour [$subhour] [$ampm]) (*sil%% | *any%%);";
  const char *words[] = {
    "oclock",
    "am",
    "pm",
    "one",
    "two",
    "three",
    "four",
    "five",
    "six",
    "seven",
    "eight",
    "nine",
    "ten",
    "eleven",
    "twelve",
    "noon",
    "midnight",
    "thirty",
    "*sil",
    "*any",
    "*nota",
  };

  const char *pronunciations[] = {
    ". oU . k l A1 k .",
    ". eI1 . E1 m .",
    ". p i1 . E1 m .",
    ". w ^1 n .",
    ". t u1 .",
    ". T 9 i1 .",
    ". f >1 9 .",
    ". f aI1 v .",
    ". s I1 k s .",
    ". s E1 . v ix n .",
    ". eI1 t .",
    ". n aI1 n .",
    ". t E1 n .",
    ". I . l E1 . v ix n .",
    ". t w E1 l v .",
    ". n u1 n .",
    ". m I1 d . n aI t .",
    ". T 3r1 . t i .",
    ". .pau .",
    ". .any .",
    ". .nota .",
  };
</pre>

<p>
See also:
 <ul>
<li><a href="phrasespot.html">PhraseSpotting Grammars</a>
<li><a href="wordspot.html">Word-Spotting Grammars</a>
<li><a href="nota.html">Out-of-Vocabulary Rejection</a>
<li><a href="nbest.html">N-Best Grammars</a>
</ul>
</P>

<!----------------------------------------------------------------------- -->
</body>
